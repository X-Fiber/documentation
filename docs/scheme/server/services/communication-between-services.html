<!doctype html>
<html lang="uk" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-scheme/server/services/communication-between-services" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.1.1">
<title data-rh="true">Комунікація між сервісами | X-Fiber</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://x-fiber.org/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://x-fiber.org/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://x-fiber.org/docs/scheme/server/services/communication-between-services"><meta data-rh="true" property="og:locale" content="uk"><meta data-rh="true" name="docusaurus_locale" content="uk"><meta data-rh="true" name="docsearch:language" content="uk"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Комунікація між сервісами | X-Fiber"><meta data-rh="true" name="description" content="Комунікація між сервісами знаходиться в активній розробці і буде впроваджена у релізі v2.0.0 разом з введенням"><meta data-rh="true" property="og:description" content="Комунікація між сервісами знаходиться в активній розробці і буде впроваджена у релізі v2.0.0 разом з введенням"><link data-rh="true" rel="icon" href="/img/Favicon (32px).svg"><link data-rh="true" rel="canonical" href="https://x-fiber.org/docs/scheme/server/services/communication-between-services"><link data-rh="true" rel="alternate" href="https://x-fiber.org/docs/scheme/server/services/communication-between-services" hreflang="uk"><link data-rh="true" rel="alternate" href="https://x-fiber.org/docs/scheme/server/services/communication-between-services" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="X-Fiber RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="X-Fiber Atom Feed">




<link rel="icon" href="/img/docusaurus.png">
<link rel="manifest" href="/pwa.manifest.json">
<meta name="theme-color" content="rgb(37, 194, 160)"><link rel="stylesheet" href="/assets/css/styles.3f6516fa.css">
<script src="/assets/js/runtime~main.63e77f93.js" defer="defer"></script>
<script src="/assets/js/main.bab742ad.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Перейти до основного вмісту"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Перейти до основного вмісту</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="X-Fiber logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="X-Fiber logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><a class="navbar__item navbar__link" href="/docs/getting-started/install">Вступ</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/scheme">Бізнес схема</a><a class="navbar__item navbar__link" href="/docs/architecture">Архітектура</a><a class="navbar__item navbar__link" href="/docs/methodology">Методологія</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Перемикання між темним та світлим режимом (зараз використовується Світлий режим)" aria-label="Перемикання між темним та світлим режимом (зараз використовується Світлий режим)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Прокрутити до початку" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/scheme">Бізнес схема</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/scheme/server">Веб-сервер</a><button aria-label="Collapse sidebar category &#x27;Веб-сервер&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" tabindex="0" href="/docs/scheme/server/service">Сервіси</a><button aria-label="Collapse sidebar category &#x27;Сервіси&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/scheme/server/services/communication-between-services">Міжсервісна комунікація</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/scheme/server/services/registration-service-compose">Групування сервісів</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/scheme/server/domains">Прикладна область</a><button aria-label="Expand sidebar category &#x27;Прикладна область&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" tabindex="0" href="/docs/scheme/server/fn-agents/fn-agent">Агенти</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/scheme/web-client">Веб-клієнт</a><button aria-label="Expand sidebar category &#x27;Веб-клієнт&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Навігаційний ланцюжок поточної сторінки"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Головна сторінка" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/scheme/server"><span itemprop="name">Веб-сервер</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/scheme/server/service"><span itemprop="name">Сервіси</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Міжсервісна комунікація</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">Зміст цієї сторінки</button></div><div class="theme-doc-markdown markdown"><h1>Комунікація між сервісами</h1>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>небезпека</div><div class="admonitionContent_BuS1"><p>Комунікація між сервісами знаходиться в активній розробці і буде впроваджена у релізі <code>v2.0.0</code> разом з введенням
документа &quot;Брокер повідомлень&quot; (<code>broker</code>) та створенням нового простору імен в агенті функціональності.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="проблематика">Проблематика<a href="#проблематика" class="hash-link" aria-label="Пряме посилання на Проблематика" title="Пряме посилання на Проблематика">​</a></h3>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>інформація</div><div class="admonitionContent_BuS1"><p>Створення більше одного сервісу може бути обумовлено не лише потребою відокремлення бізнес-процесів, але й
підготовкою д о масштабування системи та інтеграції з перспективними рішеннями, такими як CRM
(Customer Relationship Management), ERP (Enterprise Resource Planning) та інші.</p></div></div>
<p>Наприклад, при розробці інтернет-магазину варто врахувати, що різні складові системи можуть мати суттєво різний рівень
навантаження. Наприклад, сам інтернет-магазин може стикатися з великим напливом користувачів та транзакцій у
періоди розпродажів або святкових акцій. У той же час, обсяг роботи системи CRM може бути помітно меншим,
оскільки вона взаємодіє з меншою кількістю клієнтів та транзакцій. Сервіс створення сповіщень може також мати сезонний
характер і тд.</p>
<p>Це може вплинути на архітектуру системи, оскільки потрібно забезпечити, щоб сервіси, що обробляють великі
обсяги даних та транзакцій, були масштабовані та стійкі до навантаження. У той же час, для менш навантажених
сервісів може бути допустимішим використання меншої кількості ресурсів.</p>
<p>Природа таких потреб створює три архітектурні виклики:</p>
<ul>
<li>Опис сервісів з чітким відокремленням один від одного.</li>
<li>Визначення навантаження на конкретний сервіс.</li>
<li>Поділ сервісів на ресурси віртуальних чи фізичних машин з урахуванням потреб горизонтального масштабування окремо
виділених сервісів.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="опис-сервісів">Опис сервісів<a href="#опис-сервісів" class="hash-link" aria-label="Пряме посилання на Опис сервісів" title="Пряме посилання на Опис сервісів">​</a></h3>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>порада</div><div class="admonitionContent_BuS1"><p>Опис сервісів повинен будуватись по архітектурний шаблону, який відомий як &quot;Event-Driven Architecture&quot; (EDA).
У цьому підході кожен сервіс може публікувати події (або топіки), а інші сервіси можуть підписуватися на ці події,
щоб реагувати на них. Це дозволяє сервісам взаємодіяти між собою без прямого виклику реквест-респонс.</p></div></div>
<p>Розглядаючи систему інтернет-магазину подієва архітектура буде виглядати наступним чином:</p>
<ul>
<li><strong>Сервіс Замовлень</strong>: Цей сервіс відповідає за обробку замовлень в магазині. Коли нове замовлення надходить, сервіс
Замовлень публікує подію &quot;Нове замовлення створено&quot;.</li>
<li><strong>Сервіс Сповіщень</strong>: Цей сервіс слідкує за подіями, які публікуються сервісом Замовлень. Коли він отримує подію &quot;Нове
замовлення створено&quot;, він може відправити сповіщення покупцю про успішне оформлення замовлення.</li>
<li><strong>Сервіс Статистики</strong>: Цей сервіс відстежує події про створення замовлень та збирає статистичні дані. Кожного разу,
коли
публікується подія &quot;Нове замовлення створено&quot;, сервіс Статистики може оновлювати свої дані про кількість замовлень.</li>
</ul>
<p><img decoding="async" loading="lazy" alt="communication-logic.svg" src="/assets/images/communication-logic-cdfd2fd52abecd94d562ca75194cb8b0.svg" width="942" height="462" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="навантаження-сервісу">Навантаження сервісу<a href="#навантаження-сервісу" class="hash-link" aria-label="Пряме посилання на Навантаження сервісу" title="Пряме посилання на Навантаження сервісу">​</a></h3>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>небезпека</div><div class="admonitionContent_BuS1"><p>Створення декларативного інструмента для визначення навантаження знаходиться в активній розробці та буде представлений в
релізі v2.0.0. Визначення навантаження буде здійснюватись завдяки <a href="https://www.artillery.io" target="_blank" rel="noopener noreferrer">Artillery</a>. Він дозволяє
симулювати велику кількість одночасних запитів на сервер та вимірювати, як система впорається з цим навантаженням. Окрім
цього він здатний вбудовуватись в CI / CD pipeline, що ми плануємо надати в релізі v3.0.0.</p></div></div>
<p>Основні кроки використання Artillery для визначення навантаження сервісу:</p>
<ul>
<li>Налаштування тестових сценаріїв: Спочатку потрібно визначити, які операції або запити до сервісу будуть тестуватися.
Це може бути, наприклад, запит на створення нового користувача або отримання списку товарів, створення сповіщення про
подію тощо.
Створення тестових сценаріїв у JavaScript: Artillery дозволяє описувати тестові сценарії у зручному форматі. Ви м ожете
визначити кількість запитів, їх тип, та інші параметри.</li>
<li>Виконання тестів: Після налаштування тестових сценаріїв, Artillery може бути запущений для виконання тестів. Він
створить необхідну кількість одночасних запитів на сервер та виміряє час відповіді сервера на ці запити.</li>
<li>Аналіз результатів: Після завершення тестів, Artillery надасть звіт про продуктивність системи. Цей звіт може містити
інформацію про час відповіді сервера, кількість успішних та невдалих запитів, а також інші показники ефективності.
Використання Artillery дозволяє з&#x27;ясувати, як сервіс реагує на різні навантаження, що допомагає визначити його міцні
та слабкі сторони та забезпечити оптимальну продуктивність.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="групування-сервісів">Групування сервісів<a href="#групування-сервісів" class="hash-link" aria-label="Пряме посилання на Групування сервісів" title="Пряме посилання на Групування сервісів">​</a></h3>
<p>Визначивши навантаження на сервіси та прогнозуючи потенційне навантаження здійснюється розділення відповідних сервісів:</p>
<ul>
<li>Ряд сервісів можуть бути зареєстровані та розгорнуті в робочому середовищі в рамках одного ядра обчислень.</li>
<li>Один сервіс зареєстрований в рамках одного ядра обчислень, яке загортається в контейнер, та в разі навантаження буде
горизонтально масштабуватись.</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>примітка</div><div class="admonitionContent_BuS1"><p>Кращий подарунок інфраструктурі - правильно будувати кодову базу, яка здатна як в горизонтальне, так і вертикальне
масштабування. Бути розгорнута як в хмарному так і фізичному середовищі.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="архітектура-взаємодії">Архітектура взаємодії<a href="#архітектура-взаємодії" class="hash-link" aria-label="Пряме посилання на Архітектура взаємодії" title="Пряме посилання на Архітектура взаємодії">​</a></h2>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>інформація</div><div class="admonitionContent_BuS1"><p>Спілкування між різними сервісами буде відбуватися за допомогою брокера повідомлень,
такого як <code>RabbitMQ</code>. Для забезпечення цієї комунікації, необхідно створити спеціальний механізм в нашій бізнес-схемі,
що ми називаємо &quot;брокером повідомлень&quot;.</p></div></div>
<p><img decoding="async" loading="lazy" alt="communication_between_services" src="/assets/images/communication_between_services-63a87d54215e59a14439f0fabe47340b.svg" width="952" height="991" class="img_ev3q"></p>
<p>Взаємодія передбачає два сценарії - створення слухачів подій та виклик подій</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="створення-слухачів-подій">Створення слухачів подій<a href="#створення-слухачів-подій" class="hash-link" aria-label="Пряме посилання на Створення слухачів подій" title="Пряме посилання на Створення слухачів подій">​</a></h3>
<p>Брокер повідомлень - зарезервований документ, такий як маршрутизатор чи слухач, який може доповнювати можливості
прикладної області, яка в подальшому реєструється в потрібному сервісі. Після реєстрації прикладної області в сервісі,
вся бізнес-схема, в якій міститься ця область, завантажується в ядро обчислень. При запуску, ядро обчислень починає
слухати події від цих брокерів повідомлень.</p>
<p>Коли інший сервіс викликає подію на певному топіку брокера повідомлень, адаптер брокера повідомлень <code>BrokerAdapter</code>
виявляє відповідний обробник подій у бізнес-схемі та виконує його. Це забезпечує ефективну та надійну комунікацію між
різними частинами системи.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="виклик-подій">Виклик подій<a href="#виклик-подій" class="hash-link" aria-label="Пряме посилання на Виклик подій" title="Пряме посилання на Виклик подій">​</a></h3>
<p>Кожен обробник, описаний в документах &quot;Маршрутизатор&quot; <code>router</code> або &quot;Слухач&quot; <code>listener</code> в рамках своєї роботи має
можливість створити подію, використовуючи простір імен <code>broker</code> в агенті функціональності <code>FunctionalityAgent</code>. Це
дозволяє забезпечити гнучкість та розширюваність у взаємодії між сервісами та реагувати на різноманітні події в системі.</p>
<div class="theme-admonition theme-admonition-danger admonition_xJq3 alert alert--danger"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"></path></svg></span>небезпека</div><div class="admonitionContent_BuS1"><p>У рамках X-Fiber ми надаємо можливості для класичної взаємодії за принципом запит-відповідь (req/res). Однак, слід
відзначити, що використання цього механізму доцільно лише у виняткових випадках, пов&#x27;язаних з особливостями середовища
Node.js. Обробка таких запитів може займати значно більше часу та мати низьку ефективність у відношенні до взаємодії &quot;
точка-точка&quot;. Тому, ми рекомендуємо зосередитися на побудові взаємодії за принципом архітектури подій та
подійно-орієнтованого підходу (EDA).</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="механізм-роботи">Механізм роботи<a href="#механізм-роботи" class="hash-link" aria-label="Пряме посилання на Механізм роботи" title="Пряме посилання на Механізм роботи">​</a></h3>
<p>Планується внести наступні зміни в кодову базу в релізі v2.0.0:</p>
<ol>
<li>Створення нового модуля <code>RabbitMQConnector</code>, який буде відповідати за з&#x27;єднання з <code>RabbitMQ</code>.</li>
<li>Реалізація нового тунелю <code>RabbitMQTunnel</code>, який надасть набір методів д ля роботи з <code>RabbitMQ</code>.</li>
<li>Створення нового адаптера <code>BrokerAdapter</code>, який буде відповідати за обробку вхідних повідомлень від брокера.</li>
<li>Додавання нового простору імен <code>broker</code> в агенті функціональності <code>FunctionalityAgent</code>, де будуть описані методи,
надані <code>RabbitMQTunnel</code>, доступні для використання в <code>бізнес-схемі</code>.</li>
<li>Створення нового типу документа &quot;Брокер повідомлень&quot; <code>Broker</code>, для якого потрібно буде описати слухачі, які будуть
викликані при надходженні запиту від <code>RabbitMQ</code> та його подальшій обробці в <code>BrokerAdapter</code>.</li>
<li>Впровадження <code>opentracing</code> для логування трасування запитів між сервісами.</li>
</ol>
<p>Ці зміни дозволять реалізувати обидва аспекти комунікації через <code>RabbitMQ</code>:</p>
<ul>
<li>Реєстрація слухачів, які будуть зареєстровані в бізнес-схемі і викликані при надходженні запиту до веб-сервера та його
подальшій обробці в <code>BrokerAdapter</code>.</li>
<li>Створення тригерів на події за допомогою набору методів, наданих <code>RabbitMQTunnel</code>, які будуть доступні в просторі імен
broker в агенті функціональності <code>FunctionalityAgent</code></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/scheme/server/services/communication-between-services.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Відредагувати цю сторінку</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="сторінка документації"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/scheme/server/service"><div class="pagination-nav__sublabel">Попередня сторінка</div><div class="pagination-nav__label">Сервіс</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/scheme/server/services/registration-service-compose"><div class="pagination-nav__sublabel">Наступна сторінка</div><div class="pagination-nav__label">Групування бізнес сервісів</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#проблематика" class="table-of-contents__link toc-highlight">Проблематика</a></li><li><a href="#опис-сервісів" class="table-of-contents__link toc-highlight">Опис сервісів</a></li><li><a href="#навантаження-сервісу" class="table-of-contents__link toc-highlight">Навантаження сервісу</a></li><li><a href="#групування-сервісів" class="table-of-contents__link toc-highlight">Групування сервісів</a></li><li><a href="#архітектура-взаємодії" class="table-of-contents__link toc-highlight">Архітектура взаємодії</a><ul><li><a href="#створення-слухачів-подій" class="table-of-contents__link toc-highlight">Створення слухачів подій</a></li><li><a href="#виклик-подій" class="table-of-contents__link toc-highlight">Виклик подій</a></li><li><a href="#механізм-роботи" class="table-of-contents__link toc-highlight">Механізм роботи</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Посилання</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/x-fiber/typescheme" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub / Type scheme<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/x-fiber/server-core" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub / Server core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/x-fiber/web-client-core" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub / Web client core<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/x-fiber/visualizer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub / Visualizer<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 x-fiber. Built with x-fiber platform.</div></div></div></footer></div>
</body>
</html>